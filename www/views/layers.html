<ons-page>
    <ons-toolbar>
      <div class="left">
        <ons-toolbar-button>
            <ons-back-button>Back</ons-back-button>
        </ons-toolbar-button>
      </div>
      <div class="center">
        Layers
      </div>
    </ons-toolbar>
    <div id="layers-list">
    <script>
        var list = "<ons-list>"
        for(layer of layers){
          list += "<ons-list-item tappable>" +
            "<label class='left'>" +
              `<ons-checkbox input-id=${layer.id} onClick=changeVisible('${layer.id}')></ons-checkbox>` + 
            "</label>" +
            "<label class='center'>" + layer.label + "</label>" +
            "<label class='right'><ons-button onClick=showActionSheet()>" +
              "<ons-icon icon='md-more-vert'></ons-icon>" +
            "</ons-button></label>" + 
          "</ons-list-item>"
        }
        list += "</ons-list>"
        var content = document.getElementById("layers-list")
        content.innerHTML = list
        for(layer of layers){
          if(layer.visible){
            document.querySelector(`ons-checkbox[input-id=${layer.id}]`).checked = true
          }
        }
        function changeVisible(id){
          for(layer of layers){
            if(layer.id == id){
              layer.visible = !layer.visible
              layer.setVisible(layer.visible)
            }
          }
        }
        function showActionSheet(){
          ons.openActionSheet({
            title: 'From object',
            cancelable: true,
            buttons: [
              'Label 0',
              'Label 1',
              {
                label: 'Label 2',
                modifier: 'destructive'
              },
              {
                label: 'Cancel',
                icon: 'md-close'
              }
            ]
          }).then(function (index) { console.log('index: ', index) });
        }
    </script>
</ons-page>